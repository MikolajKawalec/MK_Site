(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{5485:function(t,e,a){"use strict";a("b815")},"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex column",class:t.bgClass},[a("div",{staticClass:"col q-pt-lg q-px-md"},[a("q-input",{attrs:{placeholder:"Szukaj miejscowości",dark:"",borderless:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getWeatherBySearch(e)}},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-icon",{attrs:{name:"my_location"},on:{click:t.getLocation}})]},proxy:!0},{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"search"},on:{click:t.getWeatherBySearch}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.weatherData?[[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{rounded:"",filled:"","bg-color":"white",label:"Minimalna temperatura"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.possibletable(e)}},model:{value:t.lowerbound_temp,callback:function(e){t.lowerbound_temp=e},expression:"lowerbound_temp"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{rounded:"",filled:"","bg-color":"white",label:"Maksymalna temperatura"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.possibletable(e)}},model:{value:t.upperbound_temp,callback:function(e){t.upperbound_temp=e},expression:"upperbound_temp"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{rounded:"",filled:"","bg-color":"white",label:"Maksymalna prędkosć wiatru w m/s"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.possibletable(e)}},model:{value:t.max_wind_speed,callback:function(e){t.max_wind_speed=e},expression:"max_wind_speed"}})],1)])])],a("div",{staticClass:"col text-white text-center"},[a("div",{staticClass:"text-h4 text-weight-light",staticStyle:{"padding-bottom":"20px"}},[t._v("\n      "+t._s(t.CurrData.name)+"\n    ")]),a("div",{staticClass:"text-h6 text-weight-light",staticStyle:{"padding-bottom":"20px"}},[t._v("\n      Możliwe godziny w których mozna prowadzić oprysk dla podancyh parametrów. Zakres temperatury od "+t._s(t.lowerbound_temp)+" do "+t._s(t.upperbound_temp)+" oraz prędkośc wiatru nie przekraczająca "+t._s(t.max_wind_speed)+" m/s oraz brak opadów na dwie godziny wcześniej i trzy godziny później.\n    ")]),[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:"Generuj tabelę"},on:{click:t.possibletable}})],1)],[a("div",{staticClass:"q-pa-md"},[a("q-table",{staticClass:"my-sticky-dynamic",class:t.fillClass,attrs:{data:t.EligbleTable,"row-key":"name",loading:t.loading,"hide-bottom":"","virtual-scroll":"","virtual-scroll-item-size":96,"virtual-scroll-sticky-size-start":96,pagination:t.pagination,"rows-per-page-options":[0]}})],1)]],2)]:[a("div",{staticClass:"col column text-center text-white"},[a("div",{staticClass:"col text-h2 text-weight-thin"},[t._v("\n      Quasar"),a("br"),t._v("Aplikacja\n    ")]),a("q-btn",{staticClass:"col",attrs:{flat:""},on:{click:t.getLocation}},[a("q-icon",{attrs:{left:"",size:"3em",name:"my_location"}}),a("div",[t._v("Znajdź moją lokalizację")])],1)],1)],a("div",{staticClass:"col skyline"})],2)},l=[],s={name:"PageIndex",data(){return{search:"",weatherData:null,Data:null,CurrData:null,lat:null,lon:null,exclude:"minutely,daily,current",apiUrl:"https://api.openweathermap.org/data/2.5/onecall",CurrUrl:"https://api.openweathermap.org/data/2.5/weather",apiKey:"b589a59d5c71789007ab80e38d633e05",lowerbound_temp:5,upperbound_temp:30,max_wind_speed:5,EligbleTable:[]}},computed:{bgClass(){if(this.weatherData)return this.weatherData.weather[0].icon.endsWith("n")?"bg-night":"bg-day"},fillClass(){return this.EligbleTable.eligible?"fill-g":"fill-r"}},methods:{getLocation(){this.$q.loading.show(),navigator.geolocation.getCurrentPosition((t=>{console.log("position: ",t),this.lat=t.coords.latitude,this.lon=t.coords.longitude,this.getWeatherByCoords()}))},getWeatherByCoords(){this.$q.loading.show(),this.$axios(`${this.apiUrl}?lat=${this.lat}&lon=${this.lon}&exclude =${this.exclude}&appid=${this.apiKey}&units=mertic&lang=pl`).then((t=>{console.log("responce: ",t),this.weatherData=t.data.current,this.Data=t.data,this.$q.loading.hide(),console.log("responce_data: ",this.data),this.$axios(`${this.CurrUrl}?lat=${this.lat}&lon=${this.lon}&appid=${this.apiKey}&units=mertic&lang=pl`).then((t=>{console.log("responce: ",t),this.CurrData=t.data,this.$q.loading.hide(),console.log("responce_data_curr: ",this.data),this.possibletable()})).catch((t=>{console.log(t),this.$q.loading.hide()}))}))},getWeatherBySearch(){this.$q.loading.show(),this.$axios(`${this.CurrUrl}?q=${this.search}&appid=${this.apiKey}&units=mertic&lang=pl`).then((t=>{console.log("responce: ",t),this.CurrData=t.data,this.$q.loading.hide(),console.log("responce_data_curr: ",this.data);let e=this.CurrData.coord.lat,a=this.CurrData.coord.lon;this.$axios(`${this.apiUrl}?lat=${e}&lon=${a}&exclude =${this.exclude}&appid=${this.apiKey}&units=mertic&lang=pl`).then((t=>{console.log("responce: ",t),this.weatherData=t.data.current,this.Data=t.data,this.$q.loading.hide(),console.log("responce_data: ",this.data),this.possibletable()}))})).catch((t=>{console.log(t),this.$q.loading.hide()}))},possibletable:function(){this.lowerbound_temp=parseFloat(this.lowerbound_temp),this.upperbound_temp=parseFloat(this.upperbound_temp),this.max_wind_speed=parseFloat(this.max_wind_speed),this.EligbleTable=[],console.log("insertTimeTable called");for(var t=2;t<this.Data.hourly.length-3;t++){let e=this.Data.hourly[t].dt,a=new Date(1e3*e),i=a.getHours(),l=a.getMinutes(),s=i+":"+l+"0";this.lowerbound_temp>this.Data.hourly[t].temp-273.15?this.EligbleTable.push({date:s,eligible:!1}):this.Data.hourly[t].temp-273.15>this.upperbound_temp||this.Data.hourly[t].wind_speed>this.max_wind_speed||this.Data.hourly[t].rain||this.Data.hourly[t+1].rain||this.Data.hourly[t+2].rain||this.Data.hourly[t+3].rain||this.Data.hourly[t-1].rain||this.Data.hourly[t-2].rain?this.EligbleTable.push({date:s,eligible:!1}):this.EligbleTable.push({date:s,eligible:!0})}console.log("possible called")}}},o=s,n=(a("5485"),a("2877")),r=a("9989"),d=a("27f9"),c=a("0016"),p=a("9c40"),h=a("eaac"),u=a("eebe"),b=a.n(u),g=Object(n["a"])(o,i,l,!1,null,null,null);e["default"]=g.exports;b()(g,"components",{QPage:r["a"],QInput:d["a"],QIcon:c["a"],QBtn:p["a"],QTable:h["a"]})},b815:function(t,e,a){}}]);